!function(e,n){"function"==typeof define&&define.amd?define(["jquery"],function(t){return n(e,t)}):"object"==typeof exports?n(e,require("jquery")):n(e,e.jQuery)}(this,function(t,s){"use strict";var e,a,n,o="remodal",i=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||o,r=s.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+i}).join(" "),d=s.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+i}).join(" "),l=s.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),c={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},p="confirmation",u="cancellation",f=void 0!==(e=document.createElement("div").style).animationName||void 0!==e.WebkitAnimationName||void 0!==e.MozAnimationName||void 0!==e.msAnimationName||void 0!==e.OAnimationName,m=/iPad|iPhone|iPod/.test(navigator.platform);function g(t){if(f&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name"))return 0;var e,n,a,i,o=t.css("animation-duration")||t.css("-webkit-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||"1";for(o=o.split(", "),s=s.split(", "),r=r.split(", "),i=0,n=o.length,e=Number.NEGATIVE_INFINITY;i<n;i++)e<(a=parseFloat(o[i])*parseInt(r[i],10)+parseFloat(s[i]))&&(e=a);return e}function h(){if(s(document).height()<=s(window).height())return 0;var t,e,n=document.createElement("div"),a=document.createElement("div");return n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n),t=n.offsetWidth,n.style.overflow="scroll",a.style.width="100%",n.appendChild(a),e=a.offsetWidth,n.parentNode.removeChild(n),t-e}function v(){if(!m){var t,e,n=s("html"),a=E("is-locked");n.hasClass(a)&&(e=s(document.body),t=parseInt(e.css("padding-right"),10)-h(),e.css("padding-right",t+"px"),n.removeClass(a))}}function $(t,e,n,a){var i=E("is",e),o=[E("is",c.CLOSING),E("is",c.OPENING),E("is",c.CLOSED),E("is",c.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=e,n||t.$modal.trigger({type:e,reason:a},[{reason:a}])}function C(t,e,n){function a(t){t.target===this&&o++}function i(t){t.target===this&&0==--o&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){n[e].off(r+" "+d)}),e())}var o=0;s.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){n[e].on(r,a).on(d,i)}),t(),0===g(n.$bg)&&0===g(n.$overlay)&&0===g(n.$wrapper)&&0===g(n.$modal)&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){n[e].off(r+" "+d)}),e())}function O(n){n.state!==c.CLOSED&&(s.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){n[e].off(r+" "+d)}),n.$bg.removeClass(n.settings.modifier),n.$overlay.addClass("is-multiple"),n.$wrapper.hide(),v(),$(n,c.CLOSED,!0))}function E(){for(var t=i,e=0;e<arguments.length;++e)t+="-"+arguments[e];return t}function y(){var t,e,n=location.hash.replace("#","");if(n){try{e=s("[data-"+o+'-id="'+n+'"]')}catch(t){}e&&e.length&&(t=s[o].lookup[e.data(o)])&&t.settings.hashTracking&&t.open()}else a&&a.state===c.OPENED&&a.settings.hashTracking&&a.close()}function w(t,e){var n=s(document.body),a=this;a.settings=s.extend({},l,e),a.index=s[o].lookup.push(a)-1,a.state=c.CLOSED,a.$overlay=s("."+E("overlay")),null!==a.settings.appendTo&&a.settings.appendTo.length&&(n=s(a.settings.appendTo)),a.$overlay.length||(a.$overlay=s("<div>").addClass(E("overlay")+" "+E("is",c.CLOSED)).hide(),n.append(a.$overlay)),a.$bg=s("."+E("bg")).addClass(E("is",c.CLOSED)),a.$modal=t.addClass(i+" "+E("is-initialized")+" "+a.settings.modifier+" "+E("is",c.CLOSED)).attr("tabindex","-1"),a.$wrapper=s("<div>").addClass(E("wrapper")+" "+a.settings.modifier+" "+E("is",c.CLOSED)).hide().append(a.$modal),n.append(a.$wrapper),a.$wrapper.on("click."+i,"[data-"+o+'-action="close"]',function(t){t.preventDefault(),a.close()}),a.$wrapper.on("click."+i,"[data-"+o+'-action="cancel"]',function(t){t.preventDefault(),a.$modal.trigger(u),a.settings.closeOnCancel&&a.close(u)}),a.$wrapper.on("click."+i,"[data-"+o+'-action="confirm"]',function(t){t.preventDefault(),a.$modal.trigger(p),a.settings.closeOnConfirm&&a.close(p)}),a.$wrapper.on("click."+i,function(t){s(t.target).hasClass(E("wrapper"))&&a.settings.closeOnOutsideClick&&a.close()})}w.prototype.open=function(){var t,e=this;e.state!==c.OPENING&&e.state!==c.CLOSING&&((t=e.$modal.attr("data-"+o+"-id"))&&e.settings.hashTracking&&(n=s(window).scrollTop(),location.hash=t),a&&a!==e&&O(a),a=e,function(){if(!m){var t,e,n=s("html"),a=E("is-locked");n.hasClass(a)||(e=s(document.body),t=parseInt(e.css("padding-right"),10)+h(),e.css("padding-right",t+"px"),n.addClass(a))}}(),e.$bg.addClass(e.settings.modifier),e.$overlay.addClass(e.settings.modifier).show(),e.$wrapper.show().scrollTop(0),e.$modal.focus(),C(function(){$(e,c.OPENING)},function(){$(e,c.OPENED)},e))},w.prototype.close=function(t){var e=this;e.state!==c.OPENING&&e.state!==c.CLOSING&&e.state!==c.CLOSED&&(e.settings.hashTracking&&e.$modal.attr("data-"+o+"-id")===location.hash.substr(1)&&(location.hash="",s(window).scrollTop(n)),C(function(){$(e,c.CLOSING,!1,t)},function(){e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),v(),$(e,c.CLOSED,!1,t)},e))},w.prototype.getState=function(){return this.state},w.prototype.destroy=function(){var t=s[o].lookup;O(this),this.$wrapper.remove(),delete t[this.index],0===s.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(E("is",c.CLOSING)+" "+E("is",c.OPENING)+" "+E("is",c.CLOSED)+" "+E("is",c.OPENED)))},s[o]={lookup:[]},s.fn[o]=function(n){var a,i;return this.each(function(t,e){null==(i=s(e)).data(o)?(a=new w(i,n),i.data(o,a.index),a.settings.hashTracking&&i.attr("data-"+o+"-id")===location.hash.substr(1)&&a.open()):a=s[o].lookup[i.data(o)]}),a},s(document).ready(function(){s(document).on("click","[data-"+o+"-target]",function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-"+o+"-target"),n=s("[data-"+o+'-id="'+e+'"]');s[o].lookup[n.data(o)].open()}),s(document).find("."+i).each(function(t,e){var n=s(e),a=n.data(o+"-options");a?("string"==typeof a||a instanceof String)&&(a=function(t){var e,n,a,i,o={};for(i=0,n=(e=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<n;i++)e[i]=e[i].split(":"),("string"==typeof(a=e[i][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),o[e[i][0]]=a;return o}(a)):a={},n[o](a)}),s(document).on("keydown."+i,function(t){a&&a.settings.closeOnEscape&&a.state===c.OPENED&&27===t.keyCode&&a.close()}),s(window).on("hashchange."+i,y)})});